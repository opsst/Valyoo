{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pisit\\\\Desktop\\\\valyoo\\\\src\\\\Transaction.component.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddressDetail = props => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"border border-black mb-4 p-4 hover:bg-black hover:text-white \",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"font-primary2 text-xl uppercase flex relative\",\n    children: [props.detail.addname, /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"w-4 h-4 absolute right-6\",\n      fill: \"currentColor\",\n      viewBox: \"0 0 20 20\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 126\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: props.choosing,\n      className: \"absolute right-0\",\n      type: \"radio\",\n      name: \"address\",\n      value: props.detail._id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-3\",\n    children: [props.detail.fn, \" \", props.detail.ln, \",\", props.detail.addi1]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [props.detail.ctry, \", \", props.detail.pvince, \", \", props.detail.district, \", \", props.detail.sdistrict]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    children: props.detail.pstcode\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    children: props.detail.phnum\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 7,\n  columnNumber: 5\n}, this);\n\n_c = AddressDetail;\nexport default class Transaction extends Component {\n  constructor(props) {\n    super(props);\n    this.showAddress = this.showAddress.bind(this);\n    this.haveAddress = this.haveAddress.bind(this);\n    this.chooseAdd = this.chooseAdd.bind(this);\n    this.Delifree = this.Delifree.bind(this);\n    this.state = {\n      cart: [],\n      address: [],\n      isAddress: false,\n      chooseID: \"\",\n      cusId: \"\",\n      tItem: 0,\n      tTotal: 0,\n      tDeli: 0\n    };\n  }\n\n  componentDidMount() {\n    const accessTokenObj = localStorage.getItem(\"token\");\n    const accessCheckout = localStorage.getItem(\"checkout\");\n    const x = accessTokenObj;\n    const checkout = accessCheckout;\n    this.setState({\n      cusId: checkout\n    }); // fetch('http://localhost:5000/cart/'+this.props.match.params.id,{\n    //     method:'Get',\n    //     headers : myHeaders\n    // })\n    // .then(res => console.log(res.data))\n\n    axios.get('http://localhost:5000/cart/' + checkout, {\n      headers: {\n        Authorization: x\n      }\n    }).then(res => {\n      console.log(res.data);\n      this.setState({\n        cart: res.data\n      });\n\n      for (let x = 0; x < this.state.cart.length; x++) {\n        axios.get('http://localhost:5000/product/' + this.state.cart[x].prId).then(res => {\n          console.log(this.state.cart[x]._id);\n          axios.post('http://localhost:5000/cart/' + this.state.cart[x]._id, res.data).then(res => {\n            console.log(res);\n            const accessTokenObj = localStorage.getItem(\"token\");\n            const x = accessTokenObj;\n            axios.get('http://localhost:5000/cart/' + checkout, {\n              headers: {\n                Authorization: x\n              }\n            }).then(res => {\n              console.log(res);\n              this.setState({\n                cart: res.data\n              });\n              this.Counter();\n            });\n          });\n        });\n      }\n    });\n    console.log(this.state.cart);\n    axios.get('http://localhost:5000/address/get', {\n      headers: {\n        Authorization: x\n      }\n    }).then(res => {\n      console.log(res.data);\n\n      if (res.data.length !== 0) {\n        this.setState({\n          address: res.data,\n          isAddress: true\n        });\n      }\n\n      console.log(this.state.isAddress);\n      this.forceUpdate(); // this.setState({\n      // toId:res.data._id\n      // })\n    });\n  }\n\n  Counter() {\n    let Total = 0;\n    let Deli = 0;\n    let TotalItem = 0;\n\n    for (let x = 0; x < this.state.cart.length; x++) {\n      Total = Total + this.state.cart[x].prAr.pprice * this.state.cart[x].qunt;\n      TotalItem = TotalItem + this.state.cart[x].qunt;\n    }\n\n    console.log(Total);\n\n    if (Total < 3500) {\n      Deli = 150;\n    }\n\n    this.setState({\n      tItem: TotalItem,\n      tTotal: Total,\n      tDeli: Deli\n    });\n  }\n\n  haveAddress() {\n    return this.state.address.map(current => {\n      // console.log(current)\n      return /*#__PURE__*/_jsxDEV(AddressDetail, {\n        detail: current,\n        choosing: this.chooseAdd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 20\n      }, this);\n    });\n  }\n\n  showAddress() {\n    if (this.state.isAddress === true) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-4\",\n        children: this.haveAddress()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 24\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-12 py-3 uppercase text-center text-white bg-black\",\n        children: \"You don't have any address please add before checkout.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 24\n      }, this);\n    }\n  }\n\n  chooseAdd(e) {\n    console.log(e);\n    this.setState({\n      chooseID: e.target.value\n    });\n  }\n\n  Delifree() {\n    if (this.state.tDeli === 0) {\n      console.log(\"FREEEEEEEEEEEEEEEEe\");\n      return \"Free\";\n    } else {\n      return \"฿\" + this.state.tDeli;\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-20 mx-96 h-full min-h-screen \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-black text-3xl text-white font-primary2 px-6 py-8\",\n        children: [\"REVIEW\", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary4 text-base\",\n          children: \"Just a few step before checkout.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-3 font-primary \",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 py-16 col-span-2 font-primary2 text-xl \",\n          children: [\"DELIVERY INFORMATION\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs border-b-2 pb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              children: this.showAddress()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" inline-block cursor-pointer hover:bg-black hover:text-white px-2\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/address/\" + this.state.cusId,\n                children: \"NEW ADDRESS?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 border-b-2 pb-6\",\n            children: [\"DELIVERY METHODS\", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 mx-5 border border-gray text-sm px-6 py-10 relative text-white bg-black cursor-pointer\",\n                children: [\"STANDARD SHIPPING\", /*#__PURE__*/_jsxDEV(\"svg\", {\n                  class: \"w-6 h-6 absolute right-2 top-2\",\n                  fill: \"currentColor\",\n                  viewBox: \"0 0 20 20\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    \"fill-rule\": \"evenodd\",\n                    d: \"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\",\n                    \"clip-rule\": \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 144\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs font-primary4\",\n                  children: [\"DHL eCommerce (Within 2-7 working days)\", /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"\",\n                    children: \"FREE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 mx-5 border border-gray text-sm px-6 py-10 text-gray-300\",\n                children: [\"EXPRESS SHIPPING\", /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs font-primary4\",\n                  children: [\"DHL eCommerce (Within 1-2 working days)\", /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"\",\n                    children: \"\\u0E3F250\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: \"PAYMENT METHODS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mx-6 mt-12 px-4 pt-4 pb-12 font-primary2 text-xl h-52 border-gray-300 border\",\n          children: [\"ORDER SUMMARY\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-primary4 text-sm my-2 flex text-left overflow-clip\",\n            children: [this.state.tItem, /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-1\",\n              children: \"ITEM\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 116\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" w-full text-right\",\n              children: [\"\\u0E3F\", this.state.tTotal]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 148\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-primary4 text-sm my-2 flex text-left overflow-clip\",\n            children: [\"DELIVERIES\", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" w-full text-right\",\n              children: this.Delifree()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 100\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-primary2 text-base mt-14 flex text-left overflow-clip\",\n            children: [\"TOTAL\", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" w-full text-right\",\n              children: [\"\\u0E3F\", this.state.tTotal + this.state.tDeli]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 98\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"AddressDetail\");","map":{"version":3,"sources":["C:/Users/Pisit/Desktop/valyoo/src/Transaction.component.js"],"names":["React","Component","Link","axios","AddressDetail","props","detail","addname","choosing","_id","fn","ln","addi1","ctry","pvince","district","sdistrict","pstcode","phnum","Transaction","constructor","showAddress","bind","haveAddress","chooseAdd","Delifree","state","cart","address","isAddress","chooseID","cusId","tItem","tTotal","tDeli","componentDidMount","accessTokenObj","localStorage","getItem","accessCheckout","x","checkout","setState","get","headers","Authorization","then","res","console","log","data","length","prId","post","Counter","forceUpdate","Total","Deli","TotalItem","prAr","pprice","qunt","map","current","e","target","value","render"],"mappings":"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","sourcesContent":["import React ,{ Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\n\r\nconst AddressDetail = props=>(\r\n    <div  className=\"border border-black mb-4 p-4 hover:bg-black hover:text-white \">\r\n        \r\n        <div className=\"font-primary2 text-xl uppercase flex relative\">\r\n            {props.detail.addname}\r\n        <svg className=\"w-4 h-4 absolute right-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\"></path></svg>\r\n        <input onChange={props.choosing} className=\"absolute right-0\" type=\"radio\" name=\"address\" value={props.detail._id}></input>\r\n        </div>\r\n        <div className=\"mt-3\">\r\n            {props.detail.fn} {props.detail.ln},{props.detail.addi1}\r\n        </div>\r\n        <div>\r\n            {props.detail.ctry}, {props.detail.pvince}, {props.detail.district}, {props.detail.sdistrict}\r\n        </div>\r\n        <div>\r\n            {props.detail.pstcode}\r\n        </div>\r\n        <div>\r\n            {props.detail.phnum}\r\n        </div>\r\n    </div>\r\n    \r\n)\r\n\r\nexport default class Transaction extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.showAddress = this.showAddress.bind(this)\r\n        this.haveAddress = this.haveAddress.bind(this)\r\n        this.chooseAdd = this.chooseAdd.bind(this)\r\n        this.Delifree = this.Delifree.bind(this)\r\n\r\n        \r\n        this.state = {\r\n            cart:[],\r\n            address:[],\r\n            isAddress:false,\r\n            chooseID:\"\",\r\n            cusId:\"\",\r\n            tItem:0,\r\n            tTotal:0,\r\n            tDeli:0\r\n            };\r\n                    \r\n    }\r\n    componentDidMount(){\r\n        const accessTokenObj = localStorage.getItem(\"token\");\r\n        const accessCheckout = localStorage.getItem(\"checkout\")\r\n        const x = accessTokenObj\r\n        const checkout = accessCheckout\r\n        this.setState({\r\n            cusId:checkout\r\n        })\r\n        // fetch('http://localhost:5000/cart/'+this.props.match.params.id,{\r\n        //     method:'Get',\r\n        //     headers : myHeaders\r\n        // })\r\n        // .then(res => console.log(res.data))\r\n        axios.get('http://localhost:5000/cart/'+checkout,{headers:{Authorization:x}})\r\n        .then(res=>{\r\n            console.log(res.data)\r\n            this.setState({\r\n                cart:res.data\r\n            })\r\n            for(let x=0; x<this.state.cart.length; x++){\r\n\r\n                axios.get('http://localhost:5000/product/'+this.state.cart[x].prId)\r\n                .then(res=>{\r\n\r\n                    console.log(this.state.cart[x]._id)\r\n                    axios.post('http://localhost:5000/cart/'+this.state.cart[x]._id,res.data)\r\n                    .then(res=>{\r\n                        console.log(res)\r\n                        const accessTokenObj = localStorage.getItem(\"token\");\r\n                        const x = accessTokenObj\r\n                        axios.get('http://localhost:5000/cart/'+checkout,{headers:{Authorization:x}})\r\n                        .then(res=>{ \r\n                            console.log(res)\r\n                            this.setState({\r\n                                cart:res.data\r\n                            })\r\n                            this.Counter()\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n            \r\n        })\r\n        console.log(this.state.cart)\r\n        axios.get('http://localhost:5000/address/get',{headers:{Authorization:x}})\r\n        .then(res=>{\r\n            console.log(res.data)\r\n            if(res.data.length!==0){\r\n                this.setState({\r\n                    address:res.data,\r\n                    isAddress:true\r\n                })\r\n            }\r\n            console.log(this.state.isAddress)\r\n            this.forceUpdate();\r\n            \r\n            // this.setState({\r\n            // toId:res.data._id\r\n            // })\r\n        })\r\n        \r\n    }\r\n    Counter(){\r\n        let Total = 0\r\n        let Deli = 0\r\n        let TotalItem = 0\r\n        for(let x=0; x<this.state.cart.length;x++){\r\n            Total = Total+(this.state.cart[x].prAr.pprice*this.state.cart[x].qunt)\r\n            TotalItem = TotalItem + this.state.cart[x].qunt\r\n        }\r\n        console.log(Total)\r\n        if(Total<3500){\r\n            Deli = 150\r\n        }\r\n        this.setState({\r\n            tItem:TotalItem,\r\n            tTotal:Total,\r\n            tDeli:Deli\r\n        })\r\n    }\r\n    haveAddress(){\r\n        return this.state.address.map(current=>{\r\n            // console.log(current)\r\n            return <AddressDetail detail={current} choosing={this.chooseAdd} />\r\n        })\r\n    }\r\n    showAddress(){\r\n\r\n            if(this.state.isAddress===true){\r\n                return(<div className=\"m-4\">{this.haveAddress()}</div> )\r\n            }\r\n            else{\r\n                return(<div className=\"w-full h-12 py-3 uppercase text-center text-white bg-black\">You don't have any address please add before checkout.</div>)\r\n            }\r\n\r\n\r\n    }   \r\n    chooseAdd(e){\r\n        \r\n        console.log(e)\r\n        this.setState({\r\n            chooseID:e.target.value\r\n        })\r\n    }\r\n    Delifree(){\r\n        if(this.state.tDeli===0){\r\n        console.log(\"FREEEEEEEEEEEEEEEEe\")\r\n\r\n            return \"Free\"\r\n        }\r\n        else{\r\n            return (\"฿\"+this.state.tDeli)\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"mt-20 mx-96 h-full min-h-screen \">\r\n                <div className=\"bg-black text-3xl text-white font-primary2 px-6 py-8\">REVIEW\r\n                <div className=\"font-primary4 text-base\">\r\n                    Just a few step before checkout.\r\n                    </div></div>\r\n                    <div className=\"grid grid-cols-3 font-primary \">\r\n                        <div className=\"px-6 py-16 col-span-2 font-primary2 text-xl \">DELIVERY INFORMATION\r\n                        <div className=\"text-xs border-b-2 pb-6\">\r\n                            <form >\r\n                            {this.showAddress()}\r\n\r\n                            </form>\r\n                            <div className=\" inline-block cursor-pointer hover:bg-black hover:text-white px-2\">\r\n                                <Link to={\"/address/\"+this.state.cusId}>\r\n                                NEW ADDRESS?\r\n                                </Link>\r\n                            \r\n                            </div>\r\n                        </div>\r\n                        <div className=\"mt-6 border-b-2 pb-6\">DELIVERY METHODS\r\n                        <div className=\"grid grid-cols-2\">\r\n\r\n                        <div className=\"mt-4 mx-5 border border-gray text-sm px-6 py-10 relative text-white bg-black cursor-pointer\">STANDARD SHIPPING\r\n                        <svg class=\"w-6 h-6 absolute right-2 top-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\"></path></svg>\r\n                        <div className=\"text-xs font-primary4\">DHL eCommerce (Within 2-7 working days)\r\n                        <div className=\"\">FREE</div>\r\n                        </div></div>\r\n                        <div className=\"mt-4 mx-5 border border-gray text-sm px-6 py-10 text-gray-300\">EXPRESS SHIPPING\r\n                        <div className=\"text-xs font-primary4\">DHL eCommerce (Within 1-2 working days)\r\n                        <div className=\"\">฿250</div>\r\n                        </div></div>\r\n\r\n                        </div>\r\n\r\n                        </div>\r\n                        <div className=\"mt-4\">PAYMENT METHODS</div>\r\n                        </div>\r\n\r\n                        <div className=\"mx-6 mt-12 px-4 pt-4 pb-12 font-primary2 text-xl h-52 border-gray-300 border\">ORDER SUMMARY\r\n                        <div className=\"font-primary4 text-sm my-2 flex text-left overflow-clip\">{this.state.tItem}<div className=\"ml-1\">ITEM</div><div className=\" w-full text-right\">฿{this.state.tTotal}</div></div>\r\n                <div className=\"font-primary4 text-sm my-2 flex text-left overflow-clip\">DELIVERIES<div className=\" w-full text-right\">{this.Delifree()}</div></div>\r\n                <div className=\"font-primary2 text-base mt-14 flex text-left overflow-clip\">TOTAL<div className=\" w-full text-right\">฿{this.state.tTotal+this.state.tDeli}</div></div></div>\r\n                        \r\n            \r\n                    </div>\r\n                \r\n            </div>\r\n\r\n            \r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}