{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pisit\\\\Desktop\\\\valyoo\\\\src\\\\Cart.component.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios'; // import { response } from 'express';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DeleteBut = props => /*#__PURE__*/_jsxDEV(\"div\", {\n  children: /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: props.delfunc.bind(this, props.obj),\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      class: \"h-6 w-6 absolute right-2\",\n      fill: \"none\",\n      viewBox: \"0 0 24 24\",\n      stroke: \"currentColor\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        \"stroke-linecap\": \"round\",\n        \"stroke-linejoin\": \"round\",\n        \"stroke-width\": \"2\",\n        d: \"M6 18L18 6M6 6l12 12\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 66\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 13\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 9,\n  columnNumber: 5\n}, this);\n\n_c = DeleteBut;\n\nconst Cartlist = props => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex text-sm \",\n  children: [/*#__PURE__*/_jsxDEV(Link, {\n    to: \"/product/\" + props.datas._id,\n    children: /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \" w-48 h-48 object-cover justify-self-end \",\n      src: props.img\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 46\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 7\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ml-4 \",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/product/\" + props.datas._id,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-primary2 text-left uppercase\",\n        children: props.datas.pname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 50\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"font-primary4 uppercase\",\n      children: [props.datas.pbrand, \" \", props.datas.pdesc]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"font-primary3 \",\n      children: props.datas.ptcolor[props.position]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"relative \",\n        onChange: props.changeQ.bind(this, props),\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"rounded-none appearance-none border w-24 px-1 py-3 mb-6 font-primary3 text-xs \",\n          children: props.formQuan(props.pureData)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          class: \"h-4 w-4 absolute top-3 left-16 ml-2\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            \"stroke-linecap\": \"round\",\n            \"stroke-linejoin\": \"round\",\n            \"stroke-width\": \"2\",\n            d: \"M19 9l-7 7-7-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 3\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-primary3 px-1 py-3 mb-6 \",\n        children: [\"SIZE: \", props.size]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"font-primary text-base\",\n      children: [\"\\u0E3F\", props.datas.pprice * props.pureData.qunt]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 7\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 18,\n  columnNumber: 5\n}, this);\n\n_c2 = Cartlist;\nexport default class ViewProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.toTransaction = this.toTransaction.bind(this);\n    this.Counter = this.Counter.bind(this);\n    this.ChangeQuan = this.ChangeQuan.bind(this);\n    this.onClicker = this.onClicker.bind(this);\n    this.showCartlist = this.showCartlist.bind(this);\n    this.findQuan = this.findQuan.bind(this);\n    this.state = {\n      cart: [],\n      test: [],\n      tItem: 0,\n      tTotal: 0,\n      tDeli: 0,\n      inCart: true\n    };\n  }\n\n  componentDidMount() {\n    const accessTokenObj = localStorage.getItem(\"token\");\n    const x = accessTokenObj; // fetch('http://localhost:5000/cart/'+this.props.match.params.id,{\n    //     method:'Get',\n    //     headers : myHeaders\n    // })\n    // .then(res => console.log(res.data))\n\n    axios.get('http://localhost:5000/cart/' + this.props.match.params.id, {\n      headers: {\n        Authorization: x\n      }\n    }).then(res => {\n      // console.log(res)\n      this.setState({\n        cart: res.data\n      });\n\n      for (let x = 0; x < this.state.cart.length; x++) {\n        axios.get('http://localhost:5000/product/' + this.state.cart[x].prId).then(res => {\n          console.log(res);\n          axios.post('http://localhost:5000/cart/' + this.state.cart[x]._id, res.data).then(res => {\n            console.log(res);\n            const accessTokenObj = localStorage.getItem(\"token\");\n            const x = accessTokenObj;\n            axios.get('http://localhost:5000/cart/' + this.props.match.params.id, {\n              headers: {\n                Authorization: x\n              }\n            }).then(res => {\n              this.setState({\n                cart: res.data\n              });\n\n              if (this.state.cart.length === 0) {\n                this.setState({\n                  inCart: false\n                });\n              }\n\n              this.Counter();\n            });\n          });\n        });\n      }\n    });\n  }\n\n  ChangeQuan(obj, e) {\n    // console.log(e.target.value,obj.pureData._id )\n    axios.post('http://localhost:5000/cart/q/' + obj.pureData._id, {\n      qunt: e.target.value\n    });\n    window.location.reload();\n  }\n\n  Counter() {\n    let Total = 0;\n    let Deli = 0;\n    let TotalItem = 0;\n\n    for (let x = 0; x < this.state.cart.length; x++) {\n      Total = Total + this.state.cart[x].prAr.pprice * this.state.cart[x].qunt;\n      TotalItem = TotalItem + this.state.cart[x].qunt;\n    }\n\n    console.log(Total);\n\n    if (Total < 3500) {\n      Deli = 150;\n    }\n\n    this.setState({\n      tItem: TotalItem,\n      tTotal: Total,\n      tDeli: Deli\n    });\n  }\n\n  findQuan(obj) {\n    for (let i = 0; i < obj.prAr.pquan.length; i++) {\n      if (obj.prAr.pquan[i][0] === obj.prsize) {\n        let optionList = obj.prAr.pquan[i][obj.prcolor + 1];\n        let arrayList = [];\n\n        for (let j = 1; j <= optionList; j++) {\n          arrayList.push(j);\n\n          if (j === 10) {\n            break;\n          }\n        } // console.log(arrayList)\n\n\n        return arrayList.map(currentList => {\n          // console.log(currentList)\n          if (obj.qunt === currentList) {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: currentList,\n              selected: true,\n              children: currentList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 28\n            }, this);\n          }\n\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: currentList,\n            children: currentList\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 24\n          }, this);\n        });\n      }\n    } // console.log()\n    // console.log(obj.qunt,obj.prsize,obj.prcolor,obj.prId[0][0].pquan[0][0])\n    // let thsize = ''\n    // for(let x=0; x< obj.prId[0][0].pquan.length;x++){\n    //     if(obj.prId[0][0].pquan[x][0]===obj.prsize)\n    //     {\n    //         thsize = obj.prId[0][0].pquan[x]\n    //         break;\n    //     }\n    // }\n    // console.log(thsize)\n\n  }\n\n  onClicker(obj) {\n    const accessTokenObj = localStorage.getItem(\"token\");\n    const x = accessTokenObj;\n    const myHeaders = new Headers();\n    myHeaders.append(\"Authorization\", x);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    axios.delete('http://localhost:5000/cart/' + obj, {\n      headers: {\n        Authorization: x\n      }\n    });\n    window.location.reload();\n  }\n\n  toTransaction() {\n    let x = this.props.match.params.id;\n    localStorage.setItem('checkout', x);\n    window.location = '/checkout';\n  }\n\n  showCartlist() {\n    if (this.state.cart !== undefined) {\n      // console.log(this.state.cart[0].prId[0][0].pimg[this.state.cart[0].prcolor][0])\n      return this.state.cart.map(currentobj => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"m-2 p-0 mr-96 pr-64 border-b-2 w-full pb-6 mb-6 relative\",\n          children: [/*#__PURE__*/_jsxDEV(DeleteBut, {\n            delfunc: this.onClicker,\n            obj: currentobj._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Cartlist, {\n            changeQ: this.ChangeQuan,\n            img: currentobj.prAr.pimg[currentobj.prcolor][0],\n            size: currentobj.prsize,\n            datas: currentobj.prAr,\n            formQuan: this.findQuan,\n            pureData: currentobj,\n            position: currentobj.prcolor\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 24\n        }, this);\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-20 mx-96 h-full flex\",\n      children: [this.state.inCart && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-primary2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary2 text-3xl px-2\",\n          children: \"CART\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary3 text-sm px-2 mb-4\",\n          children: [\"Total (\", this.state.tItem, \" items)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this), this.showCartlist()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 37\n      }, this), this.state.inCart && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-52 border py-4 px-4 ml-8 mt-16 font-primary2 text-xl\",\n        children: [\"ORDER SUMMARY\", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary4 text-sm my-2 flex text-left overflow-clip\",\n          children: [this.state.tItem, /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-1\",\n            children: \"ITEM\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 108\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" w-full text-right\",\n            children: [\"\\u0E3F\", this.state.tTotal]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 140\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary4 text-sm my-2 flex text-left overflow-clip\",\n          children: [\"DELIVERIES\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" w-full text-right\",\n            children: [\"\\u0E3F\", this.state.tDeli]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 100\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary2 text-base mt-14 flex text-left overflow-clip\",\n          children: [\"TOTAL\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" w-full text-right\",\n            children: [\"\\u0E3F\", this.state.tTotal + this.state.tDeli]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 98\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-black shadow text-white rounded-full py-5 px-6 mt-12 md:bg-orange text-center cursor-pointer font-primary text-base\",\n          onClick: this.toTransaction,\n          children: \"CHECK OUT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DeleteBut\");\n$RefreshReg$(_c2, \"Cartlist\");","map":{"version":3,"sources":["C:/Users/Pisit/Desktop/valyoo/src/Cart.component.js"],"names":["React","Component","Link","axios","DeleteBut","props","delfunc","bind","obj","Cartlist","datas","_id","img","pname","pbrand","pdesc","ptcolor","position","changeQ","formQuan","pureData","size","pprice","qunt","ViewProduct","constructor","toTransaction","Counter","ChangeQuan","onClicker","showCartlist","findQuan","state","cart","test","tItem","tTotal","tDeli","inCart","componentDidMount","accessTokenObj","localStorage","getItem","x","get","match","params","id","headers","Authorization","then","res","setState","data","length","prId","console","log","post","e","target","value","window","location","reload","Total","Deli","TotalItem","prAr","i","pquan","prsize","optionList","prcolor","arrayList","j","push","map","currentList","myHeaders","Headers","append","delete","setItem","undefined","currentobj","pimg","render"],"mappings":";AAEA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;;;AAEA,MAAMC,SAAS,GAAGC,KAAK,iBACnB;AAAA,yBACQ;AAAQ,IAAA,OAAO,EAAEA,KAAK,CAACC,OAAN,CAAcC,IAAd,CAAmB,IAAnB,EAAwBF,KAAK,CAACG,GAA9B,CAAjB;AAAA,2BAAqD;AAAK,MAAA,KAAK,EAAC,4BAAX;AAAwC,MAAA,KAAK,EAAC,0BAA9C;AAAyE,MAAA,IAAI,EAAC,MAA9E;AAAqF,MAAA,OAAO,EAAC,WAA7F;AAAyG,MAAA,MAAM,EAAC,cAAhH;AAAA,6BACzD;AAAM,0BAAe,OAArB;AAA6B,2BAAgB,OAA7C;AAAqD,wBAAa,GAAlE;AAAsE,QAAA,CAAC,EAAC;AAAxE;AAAA;AAAA;AAAA;AAAA;AADyD;AAAA;AAAA;AAAA;AAAA;AAArD;AAAA;AAAA;AAAA;AAAA;AADR;AAAA;AAAA;AAAA;AAAA,QADJ;;KAAMJ,S;;AAQN,MAAMK,QAAQ,GAAGJ,KAAK,iBAElB;AAAK,EAAA,SAAS,EAAC,eAAf;AAAA,0BAEE,QAAC,IAAD;AAAM,IAAA,EAAE,EAAE,cAAYA,KAAK,CAACK,KAAN,CAAYC,GAAlC;AAAA,2BAAuC;AAAK,MAAA,SAAS,EAAC,2CAAf;AAA2D,MAAA,GAAG,EAAEN,KAAK,CAACO;AAAtE;AAAA;AAAA;AAAA;AAAA;AAAvC;AAAA;AAAA;AAAA;AAAA,UAFF,eAIE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA,4BAEI,QAAC,IAAD;AAAM,MAAA,EAAE,EAAE,cAAYP,KAAK,CAACK,KAAN,CAAYC,GAAlC;AAAA,6BAAuC;AAAK,QAAA,SAAS,EAAC,mCAAf;AAAA,kBAAoDN,KAAK,CAACK,KAAN,CAAYG;AAAhE;AAAA;AAAA;AAAA;AAAA;AAAvC;AAAA;AAAA;AAAA;AAAA,YAFJ,eAII;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA,iBAA0CR,KAAK,CAACK,KAAN,CAAYI,MAAtD,OAA+DT,KAAK,CAACK,KAAN,CAAYK,KAA3E;AAAA;AAAA;AAAA;AAAA;AAAA,YAJJ,eAKI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,gBAAiCV,KAAK,CAACK,KAAN,CAAYM,OAAZ,CAAoBX,KAAK,CAACY,QAA1B;AAAjC;AAAA;AAAA;AAAA;AAAA,YALJ,eAMI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BAEA;AAAM,QAAA,SAAS,EAAC,WAAhB;AAA4B,QAAA,QAAQ,EAAEZ,KAAK,CAACa,OAAN,CAAcX,IAAd,CAAmB,IAAnB,EAAwBF,KAAxB,CAAtC;AAAA,gCACA;AAAQ,UAAA,SAAS,EAAC,gFAAlB;AAAA,oBAEOA,KAAK,CAACc,QAAN,CAAed,KAAK,CAACe,QAArB;AAFP;AAAA;AAAA;AAAA;AAAA,gBADA,eAKI;AAAK,UAAA,KAAK,EAAC,4BAAX;AAAwC,UAAA,KAAK,EAAC,qCAA9C;AAAoF,UAAA,IAAI,EAAC,MAAzF;AAAgG,UAAA,OAAO,EAAC,WAAxG;AAAoH,UAAA,MAAM,EAAC,cAA3H;AAAA,iCACZ;AAAM,8BAAe,OAArB;AAA6B,+BAAgB,OAA7C;AAAqD,4BAAa,GAAlE;AAAsE,YAAA,CAAC,EAAC;AAAxE;AAAA;AAAA;AAAA;AAAA;AADY;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA,eAWA;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,6BAAsDf,KAAK,CAACgB,IAA5D;AAAA;AAAA;AAAA;AAAA;AAAA,cAXA;AAAA;AAAA;AAAA;AAAA;AAAA,YANJ,eAoBI;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA,2BAA0ChB,KAAK,CAACK,KAAN,CAAYY,MAAZ,GAAmBjB,KAAK,CAACe,QAAN,CAAeG,IAA5E;AAAA;AAAA;AAAA;AAAA;AAAA,YApBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UAJF;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ;;MAAMd,Q;AAkCN,eAAe,MAAMe,WAAN,SAA0BvB,SAA1B,CAAmC;AAC9CwB,EAAAA,WAAW,CAACpB,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKqB,aAAL,GAAqB,KAAKA,aAAL,CAAmBnB,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKoB,OAAL,GAAe,KAAKA,OAAL,CAAapB,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKqB,UAAL,GAAkB,KAAKA,UAAL,CAAgBrB,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKsB,SAAL,GAAiB,KAAKA,SAAL,CAAetB,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKuB,YAAL,GAAoB,KAAKA,YAAL,CAAkBvB,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKwB,QAAL,GAAgB,KAAKA,QAAL,CAAcxB,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKyB,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAC,EADI;AAETC,MAAAA,IAAI,EAAC,EAFI;AAGTC,MAAAA,KAAK,EAAC,CAHG;AAITC,MAAAA,MAAM,EAAC,CAJE;AAKTC,MAAAA,KAAK,EAAC,CALG;AAMTC,MAAAA,MAAM,EAAC;AANE,KAAb;AASH;;AACDC,EAAAA,iBAAiB,GAAE;AACf,UAAMC,cAAc,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAvB;AACA,UAAMC,CAAC,GAAGH,cAAV,CAFe,CAGf;AACA;AACA;AACA;AACA;;AACArC,IAAAA,KAAK,CAACyC,GAAN,CAAU,gCAA8B,KAAKvC,KAAL,CAAWwC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAhE,EAAmE;AAACC,MAAAA,OAAO,EAAC;AAACC,QAAAA,aAAa,EAACN;AAAf;AAAT,KAAnE,EACCO,IADD,CACMC,GAAG,IAAE;AACP;AACA,WAAKC,QAAL,CAAc;AACVnB,QAAAA,IAAI,EAACkB,GAAG,CAACE;AADC,OAAd;;AAGA,WAAI,IAAIV,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC,KAAKX,KAAL,CAAWC,IAAX,CAAgBqB,MAA/B,EAAuCX,CAAC,EAAxC,EAA2C;AAEvCxC,QAAAA,KAAK,CAACyC,GAAN,CAAU,mCAAiC,KAAKZ,KAAL,CAAWC,IAAX,CAAgBU,CAAhB,EAAmBY,IAA9D,EACCL,IADD,CACMC,GAAG,IAAE;AAEPK,UAAAA,OAAO,CAACC,GAAR,CAAYN,GAAZ;AACAhD,UAAAA,KAAK,CAACuD,IAAN,CAAW,gCAA8B,KAAK1B,KAAL,CAAWC,IAAX,CAAgBU,CAAhB,EAAmBhC,GAA5D,EAAgEwC,GAAG,CAACE,IAApE,EACCH,IADD,CACMC,GAAG,IAAE;AACPK,YAAAA,OAAO,CAACC,GAAR,CAAYN,GAAZ;AACA,kBAAMX,cAAc,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAvB;AACA,kBAAMC,CAAC,GAAGH,cAAV;AACArC,YAAAA,KAAK,CAACyC,GAAN,CAAU,gCAA8B,KAAKvC,KAAL,CAAWwC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAhE,EAAmE;AAACC,cAAAA,OAAO,EAAC;AAACC,gBAAAA,aAAa,EAACN;AAAf;AAAT,aAAnE,EACCO,IADD,CACMC,GAAG,IAAE;AACP,mBAAKC,QAAL,CAAc;AACVnB,gBAAAA,IAAI,EAACkB,GAAG,CAACE;AADC,eAAd;;AAGA,kBAAG,KAAKrB,KAAL,CAAWC,IAAX,CAAgBqB,MAAhB,KAAyB,CAA5B,EAA8B;AAC1B,qBAAKF,QAAL,CAAc;AACVd,kBAAAA,MAAM,EAAC;AADG,iBAAd;AAGH;;AACD,mBAAKX,OAAL;AACH,aAXD;AAYH,WAjBD;AAkBH,SAtBD;AAuBH;AAEJ,KAjCD;AAoCH;;AACDC,EAAAA,UAAU,CAACpB,GAAD,EAAKmD,CAAL,EAAO;AACb;AACAxD,IAAAA,KAAK,CAACuD,IAAN,CAAW,kCAAgClD,GAAG,CAACY,QAAJ,CAAaT,GAAxD,EAA4D;AAACY,MAAAA,IAAI,EAACoC,CAAC,CAACC,MAAF,CAASC;AAAf,KAA5D;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AAEH;;AAEDrC,EAAAA,OAAO,GAAE;AACL,QAAIsC,KAAK,GAAG,CAAZ;AACA,QAAIC,IAAI,GAAG,CAAX;AACA,QAAIC,SAAS,GAAG,CAAhB;;AACA,SAAI,IAAIxB,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC,KAAKX,KAAL,CAAWC,IAAX,CAAgBqB,MAA/B,EAAsCX,CAAC,EAAvC,EAA0C;AACtCsB,MAAAA,KAAK,GAAGA,KAAK,GAAE,KAAKjC,KAAL,CAAWC,IAAX,CAAgBU,CAAhB,EAAmByB,IAAnB,CAAwB9C,MAAxB,GAA+B,KAAKU,KAAL,CAAWC,IAAX,CAAgBU,CAAhB,EAAmBpB,IAAjE;AACA4C,MAAAA,SAAS,GAAGA,SAAS,GAAG,KAAKnC,KAAL,CAAWC,IAAX,CAAgBU,CAAhB,EAAmBpB,IAA3C;AACH;;AACDiC,IAAAA,OAAO,CAACC,GAAR,CAAYQ,KAAZ;;AACA,QAAGA,KAAK,GAAC,IAAT,EAAc;AACVC,MAAAA,IAAI,GAAG,GAAP;AACH;;AACD,SAAKd,QAAL,CAAc;AACVjB,MAAAA,KAAK,EAACgC,SADI;AAEV/B,MAAAA,MAAM,EAAC6B,KAFG;AAGV5B,MAAAA,KAAK,EAAC6B;AAHI,KAAd;AAKH;;AAEDnC,EAAAA,QAAQ,CAACvB,GAAD,EAAK;AACb,SAAK,IAAI6D,CAAC,GAAC,CAAX,EAAaA,CAAC,GAAC7D,GAAG,CAAC4D,IAAJ,CAASE,KAAT,CAAehB,MAA9B,EAAqCe,CAAC,EAAtC,EAAyC;AACrC,UAAG7D,GAAG,CAAC4D,IAAJ,CAASE,KAAT,CAAeD,CAAf,EAAkB,CAAlB,MAAuB7D,GAAG,CAAC+D,MAA9B,EAAqC;AACjC,YAAIC,UAAU,GAAGhE,GAAG,CAAC4D,IAAJ,CAASE,KAAT,CAAeD,CAAf,EAAkB7D,GAAG,CAACiE,OAAJ,GAAY,CAA9B,CAAjB;AACA,YAAIC,SAAS,GAAG,EAAhB;;AACA,aAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,IAAEH,UAAf,EAA0BG,CAAC,EAA3B,EACA;AACID,UAAAA,SAAS,CAACE,IAAV,CAAeD,CAAf;;AACA,cAAGA,CAAC,KAAG,EAAP,EAAU;AACN;AACH;AAEJ,SAVgC,CAWjC;;;AACA,eAAOD,SAAS,CAACG,GAAV,CAAcC,WAAW,IAAE;AAC9B;AACA,cAAGtE,GAAG,CAACe,IAAJ,KAAWuD,WAAd,EAA0B;AACtB,gCAAO;AAAQ,cAAA,KAAK,EAAEA,WAAf;AAA4B,cAAA,QAAQ,MAApC;AAAA,wBAAsCA;AAAtC;AAAA;AAAA;AAAA;AAAA,oBAAP;AACH;;AACD,8BAAO;AAAQ,YAAA,KAAK,EAAEA,WAAf;AAAA,sBAA8BA;AAA9B;AAAA;AAAA;AAAA;AAAA,kBAAP;AACH,SANM,CAAP;AAQH;AACJ,KAvBY,CA4BT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEH;;AACDjD,EAAAA,SAAS,CAACrB,GAAD,EAAK;AACV,UAAMgC,cAAc,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAvB;AACA,UAAMC,CAAC,GAAGH,cAAV;AACA,UAAMuC,SAAS,GAAG,IAAIC,OAAJ,EAAlB;AACMD,IAAAA,SAAS,CAACE,MAAV,CAAiB,eAAjB,EAAkCtC,CAAlC;AACAoC,IAAAA,SAAS,CAACE,MAAV,CAAiB,cAAjB,EAAgC,kBAAhC;AACN9E,IAAAA,KAAK,CAAC+E,MAAN,CAAa,gCAA8B1E,GAA3C,EAA+C;AAACwC,MAAAA,OAAO,EAAC;AAACC,QAAAA,aAAa,EAACN;AAAf;AAAT,KAA/C;AACAmB,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH;;AACDtC,EAAAA,aAAa,GAAE;AACX,QAAIiB,CAAC,GAAG,KAAKtC,KAAL,CAAWwC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAhC;AACAN,IAAAA,YAAY,CAAC0C,OAAb,CAAqB,UAArB,EAAgCxC,CAAhC;AACAmB,IAAAA,MAAM,CAACC,QAAP,GAAkB,WAAlB;AAEH;;AACDjC,EAAAA,YAAY,GAAE;AACV,QAAG,KAAKE,KAAL,CAAWC,IAAX,KAAkBmD,SAArB,EAA+B;AAC3B;AACA,aAAO,KAAKpD,KAAL,CAAWC,IAAX,CAAgB4C,GAAhB,CAAoBQ,UAAU,IAAE;AAEnC,4BAAO;AAAK,UAAA,SAAS,EAAC,0DAAf;AAAA,kCAEK,QAAC,SAAD;AAAW,YAAA,OAAO,EAAE,KAAKxD,SAAzB;AAAoC,YAAA,GAAG,EAAEwD,UAAU,CAAC1E;AAApD;AAAA;AAAA;AAAA;AAAA,kBAFL,eAGK,QAAC,QAAD;AAAU,YAAA,OAAO,EAAE,KAAKiB,UAAxB;AAAoC,YAAA,GAAG,EAAEyD,UAAU,CAACjB,IAAX,CAAgBkB,IAAhB,CAAqBD,UAAU,CAACZ,OAAhC,EAAyC,CAAzC,CAAzC;AAAsF,YAAA,IAAI,EAAEY,UAAU,CAACd,MAAvG;AAA+G,YAAA,KAAK,EAAEc,UAAU,CAACjB,IAAjI;AAAuI,YAAA,QAAQ,EAAE,KAAKrC,QAAtJ;AAAgK,YAAA,QAAQ,EAAEsD,UAA1K;AAAsL,YAAA,QAAQ,EAAEA,UAAU,CAACZ;AAA3M;AAAA;AAAA;AAAA;AAAA,kBAHL;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAP;AAKH,OAPM,CAAP;AAOG;AAEV;;AAEDc,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA,iBAEK,KAAKvD,KAAL,CAAWM,MAAX,iBAAmB;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCAChB;AAAK,UAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADgB,eAEhB;AAAK,UAAA,SAAS,EAAC,iCAAf;AAAA,gCAAyD,KAAKN,KAAL,CAAWG,KAApE;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFgB,EAIf,KAAKL,YAAL,EAJe;AAAA;AAAA;AAAA;AAAA;AAAA,cAFxB,EAQK,KAAKE,KAAL,CAAWM,MAAX,iBAAmB;AAAK,QAAA,SAAS,EAAC,+DAAf;AAAA,iDACpB;AAAK,UAAA,SAAS,EAAC,yDAAf;AAAA,qBAA0E,KAAKN,KAAL,CAAWG,KAArF,eAA2F;AAAK,YAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA3F,eAA2H;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,iCAAsC,KAAKH,KAAL,CAAWI,MAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA3H;AAAA;AAAA;AAAA;AAAA;AAAA,gBADoB,eAEpB;AAAK,UAAA,SAAS,EAAC,yDAAf;AAAA,gDAAmF;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,iCAAsC,KAAKJ,KAAL,CAAWK,KAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAnF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFoB,eAGpB;AAAK,UAAA,SAAS,EAAC,4DAAf;AAAA,2CAAiF;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,iCAAsC,KAAKL,KAAL,CAAWI,MAAX,GAAkB,KAAKJ,KAAL,CAAWK,KAAnE;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAjF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHoB,eAIpB;AAAK,UAAA,SAAS,EAAC,wHAAf;AAAwI,UAAA,OAAO,EAAE,KAAKX,aAAtJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJoB;AAAA;AAAA;AAAA;AAAA;AAAA,cARxB;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAuBH;;AAxL6C","sourcesContent":["\r\n\r\nimport React ,{ Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n// import { response } from 'express';\r\n\r\nconst DeleteBut = props=>(\r\n    <div>\r\n            <button onClick={props.delfunc.bind(this,props.obj)}><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6 absolute right-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n        </svg></button>\r\n    </div>\r\n)\r\n\r\nconst Cartlist = props =>(\r\n\r\n    <div className=\"flex text-sm \">\r\n\r\n      <Link to={\"/product/\"+props.datas._id}><img className=\" w-48 h-48 object-cover justify-self-end \" src={props.img} /></Link>\r\n      \r\n      <div className=\"ml-4 \">\r\n\r\n          <Link to={\"/product/\"+props.datas._id}><div className=\"font-primary2 text-left uppercase\">{props.datas.pname}</div></Link>\r\n          \r\n          <div className=\"font-primary4 uppercase\">{props.datas.pbrand} {props.datas.pdesc}</div>\r\n          <div className=\"font-primary3 \">{props.datas.ptcolor[props.position]}</div>\r\n          <div className=\"flex\">\r\n          \r\n          <form className=\"relative \" onChange={props.changeQ.bind(this,props)}>\r\n          <select className=\"rounded-none appearance-none border w-24 px-1 py-3 mb-6 font-primary3 text-xs \">         \r\n          {/* <option value=\"1\" selected >1</option> */}\r\n                {props.formQuan(props.pureData)}\r\n                </select> \r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4 absolute top-3 left-16 ml-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n</svg>\r\n          </form>\r\n          <div className=\"font-primary3 px-1 py-3 mb-6 \">SIZE: {props.size}</div>\r\n          </div>\r\n\r\n          <div className=\"font-primary text-base\">฿{props.datas.pprice*props.pureData.qunt}</div>\r\n          \r\n      </div>\r\n      \r\n      </div>\r\n\r\n)\r\n\r\nexport default class ViewProduct extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.toTransaction = this.toTransaction.bind(this);\r\n        this.Counter = this.Counter.bind(this);\r\n        this.ChangeQuan = this.ChangeQuan.bind(this);\r\n        this.onClicker = this.onClicker.bind(this);\r\n        this.showCartlist = this.showCartlist.bind(this);\r\n        this.findQuan = this.findQuan.bind(this);\r\n        this.state = {\r\n            cart:[],\r\n            test:[],\r\n            tItem:0,\r\n            tTotal:0,\r\n            tDeli:0,\r\n            inCart:true\r\n            };\r\n                    \r\n    }\r\n    componentDidMount(){\r\n        const accessTokenObj = localStorage.getItem(\"token\");\r\n        const x = accessTokenObj\r\n        // fetch('http://localhost:5000/cart/'+this.props.match.params.id,{\r\n        //     method:'Get',\r\n        //     headers : myHeaders\r\n        // })\r\n        // .then(res => console.log(res.data))\r\n        axios.get('http://localhost:5000/cart/'+this.props.match.params.id,{headers:{Authorization:x}})\r\n        .then(res=>{\r\n            // console.log(res)\r\n            this.setState({\r\n                cart:res.data\r\n            })\r\n            for(let x=0; x<this.state.cart.length; x++){\r\n\r\n                axios.get('http://localhost:5000/product/'+this.state.cart[x].prId)\r\n                .then(res=>{\r\n\r\n                    console.log(res)\r\n                    axios.post('http://localhost:5000/cart/'+this.state.cart[x]._id,res.data)\r\n                    .then(res=>{\r\n                        console.log(res)\r\n                        const accessTokenObj = localStorage.getItem(\"token\");\r\n                        const x = accessTokenObj\r\n                        axios.get('http://localhost:5000/cart/'+this.props.match.params.id,{headers:{Authorization:x}})\r\n                        .then(res=>{\r\n                            this.setState({\r\n                                cart:res.data\r\n                            })\r\n                            if(this.state.cart.length===0){\r\n                                this.setState({\r\n                                    inCart:false\r\n                                })\r\n                            }\r\n                            this.Counter()\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n            \r\n        })\r\n        \r\n        \r\n    }\r\n    ChangeQuan(obj,e){\r\n        // console.log(e.target.value,obj.pureData._id )\r\n        axios.post('http://localhost:5000/cart/q/'+obj.pureData._id,{qunt:e.target.value})\r\n        window.location.reload();\r\n      \r\n    }\r\n\r\n    Counter(){\r\n        let Total = 0\r\n        let Deli = 0\r\n        let TotalItem = 0\r\n        for(let x=0; x<this.state.cart.length;x++){\r\n            Total = Total+(this.state.cart[x].prAr.pprice*this.state.cart[x].qunt)\r\n            TotalItem = TotalItem + this.state.cart[x].qunt\r\n        }\r\n        console.log(Total)\r\n        if(Total<3500){\r\n            Deli = 150\r\n        }\r\n        this.setState({\r\n            tItem:TotalItem,\r\n            tTotal:Total,\r\n            tDeli:Deli\r\n        })\r\n    }\r\n\r\n    findQuan(obj){\r\n    for (let i=0;i<obj.prAr.pquan.length;i++){\r\n        if(obj.prAr.pquan[i][0]===obj.prsize){\r\n            let optionList = obj.prAr.pquan[i][obj.prcolor+1]\r\n            let arrayList = []\r\n            for(let j=1;j<=optionList;j++)\r\n            {\r\n                arrayList.push(j)\r\n                if(j===10){\r\n                    break;\r\n                }\r\n\r\n            }\r\n            // console.log(arrayList)\r\n            return arrayList.map(currentList=>{\r\n                // console.log(currentList)\r\n                if(obj.qunt===currentList){\r\n                    return <option value={currentList} selected>{currentList}</option>\r\n                }\r\n                return <option value={currentList} >{currentList}</option>\r\n            })\r\n            \r\n        }\r\n    }\r\n    \r\n    \r\n\r\n\r\n        // console.log()\r\n        // console.log(obj.qunt,obj.prsize,obj.prcolor,obj.prId[0][0].pquan[0][0])\r\n        // let thsize = ''\r\n        // for(let x=0; x< obj.prId[0][0].pquan.length;x++){\r\n        //     if(obj.prId[0][0].pquan[x][0]===obj.prsize)\r\n        //     {\r\n        //         thsize = obj.prId[0][0].pquan[x]\r\n        //         break;\r\n        //     }\r\n        // }\r\n        // console.log(thsize)\r\n\r\n    }\r\n    onClicker(obj){\r\n        const accessTokenObj = localStorage.getItem(\"token\");\r\n        const x = accessTokenObj\r\n        const myHeaders = new Headers();\r\n              myHeaders.append(\"Authorization\", x)\r\n              myHeaders.append(\"Content-Type\",\"application/json\")\r\n        axios.delete('http://localhost:5000/cart/'+obj,{headers:{Authorization:x}})\r\n        window.location.reload();\r\n    }\r\n    toTransaction(){\r\n        let x = this.props.match.params.id\r\n        localStorage.setItem('checkout',x);\r\n        window.location = '/checkout'\r\n\r\n    }\r\n    showCartlist(){\r\n        if(this.state.cart!==undefined){\r\n            // console.log(this.state.cart[0].prId[0][0].pimg[this.state.cart[0].prcolor][0])\r\n            return this.state.cart.map(currentobj=>{\r\n                \r\n                return <div className=\"m-2 p-0 mr-96 pr-64 border-b-2 w-full pb-6 mb-6 relative\">\r\n\r\n                            <DeleteBut delfunc={this.onClicker} obj={currentobj._id} />\r\n                            <Cartlist changeQ={this.ChangeQuan} img={currentobj.prAr.pimg[currentobj.prcolor][0]} size={currentobj.prsize} datas={currentobj.prAr} formQuan={this.findQuan} pureData={currentobj} position={currentobj.prcolor}/>\r\n                    </div>\r\n            })}\r\n    \r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"mt-20 mx-96 h-full flex\">\r\n                {/* <button onClick={this.showCartlist} >test</button> */}\r\n                {this.state.inCart&&<div className=\"font-primary2\">\r\n                    <div className=\"font-primary2 text-3xl px-2\">CART</div>\r\n                    <div className=\"font-primary3 text-sm px-2 mb-4\">Total ({this.state.tItem} items)</div>\r\n                \r\n                    {this.showCartlist()}\r\n                </div>}\r\n                {this.state.inCart&&<div className=\"w-full h-52 border py-4 px-4 ml-8 mt-16 font-primary2 text-xl\">ORDER SUMMARY\r\n                <div className=\"font-primary4 text-sm my-2 flex text-left overflow-clip\">{this.state.tItem}<div className=\"ml-1\">ITEM</div><div className=\" w-full text-right\">฿{this.state.tTotal}</div></div>\r\n                <div className=\"font-primary4 text-sm my-2 flex text-left overflow-clip\">DELIVERIES<div className=\" w-full text-right\">฿{this.state.tDeli}</div></div>\r\n                <div className=\"font-primary2 text-base mt-14 flex text-left overflow-clip\">TOTAL<div className=\" w-full text-right\">฿{this.state.tTotal+this.state.tDeli}</div></div>\r\n                <div className=\"bg-black shadow text-white rounded-full py-5 px-6 mt-12 md:bg-orange text-center cursor-pointer font-primary text-base\" onClick={this.toTransaction}>CHECK OUT</div>\r\n                </div>}\r\n\r\n                \r\n\r\n                    \r\n                \r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}